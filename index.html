<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>HGCal Test Beam: Main Page</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">HGCal Test Beam
   &#160;<span id="projectnumber">03a93d6239a951948e06fb3ef8dae4cbdebfad30</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">HGCal Test Beam Documentation</div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#INPUTS_">Input files:</a></li>
<li class="level1"><a href="#RECO_">Reconstruction sequence</a></li>
<li class="level1"><a href="#DQM_">Running the DQM plotting</a></li>
<li class="level1"><a href="#OBSOLETE_">To be updated:</a></li>
</ul>
</div>
<div class="textblock"><p>Download instructions: <a class="el" href="instructions_.html">Instructions</a></p>
<h1><a class="anchor" id="INPUTS_"></a>
Input files:</h1>
<ul>
<li>channel mapping: file that contains the conversion between electronicID (<a class="el" href="namespaceSKIROC.html">SKIROC</a> chip number) to detector ID (DetId)<ul>
<li><pre class="fragment">HGCal/CondObjects/data/map_FNAL_2.txt </pre></li>
</ul>
</li>
<li>pedestals: pedestal values measured from pedestal run with dedicated analysis (PEDESTAL_ANALYSIS_ to be updated soon)<ul>
<li><pre class="fragment">HGCal/CondObjects/data/Ped_HighGain_8272_Mean.txt </pre></li>
<li><pre class="fragment">The above file is a sample file in the format needed to be read by the RecHitProducer. This is valid for the high gain ADC and was derived from the pedestal run 8272 </pre></li>
</ul>
</li>
<li>gains: ADCtoGeV conversion factors measured with dedicated analysis (ADCTOGEV_ to be updated soon)<ul>
<li><pre class="fragment">N/A yet </pre></li>
</ul>
</li>
</ul>
<p>Pedestals and ADCtoGeV should be provided for both high gain ADC and low gain ADC in the format of the above .txt file in lines 38-41 of <a class="el" href="HGCalTBRecHitProducer_8cc.html">Reco/plugins/HGCalTBRecHitProducer.cc</a> Now only pedestals for high gain is available. Default values if files are not provided are:</p>
<ul>
<li>0 for pedestals</li>
<li>1 for ADCtoGeV</li>
</ul>
<p>Run, event, time stamp information has been added to edm::event and can be accessed directly per event.</p>
<h1><a class="anchor" id="RECO_"></a>
Reconstruction sequence</h1>
<p>The reconstruction sequences are defined in StandardSequences/python</p>
<ul>
<li>RawToDigiSeq: This sequence reads the RAW output files and assigns the "decoded" adc values(both high and low gain) from individual channels of the <a class="el" href="namespaceSKIROC.html">SKIROC</a> to the corresponding cells of the sensor.</li>
<li>LocalRecoSeq: This sequence starts with the Digis above, subtracts from each cell of the sensor the pedestals as provided in the txt files mentioned above, and multiplies the resultant with the ADCtoGeV scale factor. -SimulationSeq: An example is not yet provided, but this will not have to go through the above sequences and we can directly invoke the plotting tools.</li>
</ul>
<p>The Raw Data files: Can be found in /afs/cern.ch/user/r/rchatter/public in folders: Electron_Runs_2932016, Electron_Runs_3032016 , Electron_Runs_3132016, Proton_Runs_0142016, Electron_Runs_0142016, Proton_Runs_0242016, Proton_Runs_0442016. The run information can be found on elog <a href="http://cmsonline.cern.ch/portal/page/portal/CMS%20online%20system/Elog?_piref815_429145_815_429142_429142.strutsAction=%2FviewSubcatMessages.do%3FcatId%3D592%26subId%3D17%26page%3D1">http://cmsonline.cern.ch/portal/page/portal/CMS%20online%20system/Elog?_piref815_429145_815_429142_429142.strutsAction=%2FviewSubcatMessages.do%3FcatId%3D592%26subId%3D17%26page%3D1</a> . Please note that the folder names are a little misleading and the beam type should currently be read off from the elog. These files will be made available on CERN eos soon and a message posted on hn.</p>
<h1><a class="anchor" id="DQM_"></a>
Running the DQM plotting</h1>
<p>Currently the DQM worflow kicks in post the creation of Digis and also after the creation of RecHits.</p>
<ul>
<li>Post Digi we can monitor:<ul>
<li>adc counts in each cell of a sensor per sample, per layer(summed over the events).</li>
<li>1D adc distributions per cell(per layer, per sample).</li>
</ul>
</li>
<li>Post RecHit we can monitor:<ul>
<li>RecHits(GeV) in each cell of a sensor, per layer(summed over the events).</li>
<li>The Occupancy(defined as RecHits above a certain threshold) in each cell of a sensor, per layer(summed over the events).</li>
<li>1D RecHits distributions per cell(per layer, per sample).</li>
<li>1D RecHits distributions summed over all cells in a layer(per layer).</li>
</ul>
</li>
</ul>
<p>On executing: </p>
<pre class="fragment">cmsRun test_cfg.py
</pre><p>a root file <b>test_output.root</b> is produced. This file has two directories namely</p>
<ul>
<li><b>hgcaltbdigisplotter:</b> with the Digi-&gt;DQM workflow</li>
<li><b>hgcaltbrechitsplotter:</b> with the RecHits to DQM workflow</li>
</ul>
<p>In the Digi-&gt;DQM workflow the following histograms may be found:</p>
<ul>
<li>(TH2Poly) FullLayer_Sample::M_Layer::N is the cumulative(over events) adc count in cells of the sensor in the #N layer for the #M sample.</li>
<li>(TH1F) Cell_u_::P_v_::Q_Sample::M_Layer::N is the 1D adc spectrum for the sample #M in a cell in layer #N marked by u=#P and v=#Q in the local(u,v) co-ordinate system of the cells in a sensor(Not to be confused with the Sensor_U, Sensor_V used to identify sensors in a layer).</li>
</ul>
<p>In the RecHits-&gt;DQM workflow the following histograms may be found:</p>
<ul>
<li>(TH2Poly) FullLayer_RecHits_Layer::N is the cumulative(over events) RecHits in cells of the sensor in the #N layer</li>
<li>(TH2Poly) FullLayer_Occupancy_Layer::N is the cumulative Occupancy(as defined above) in cells of the sensor in the #N layer</li>
<li>(TH1F) Cell_RecHits_u_::P_v_::Q_Layer::N is the 1D RecHits spectrum for a cell in layer #N marked by u=#P and v=#Q in the local(u,v) co-ordinate system of the cells in a sensor</li>
<li>(TH1F) FullLayer_RecHits_Layer::N_Summed same as above but summed over all cells in a sensor.</li>
</ul>
<p><a class="el" href="coordinates_.html">Coordinate system</a></p>
<p>Git instructions: <a class="el" href="GIT_.html">GIT SHORT instructions</a></p>
<h1><a class="anchor" id="OBSOLETE_"></a>
To be updated:</h1>
<p><a class="el" href="testRecHits_.html">test recHits</a> </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Aug 29 2016 11:29:32 for HGCal Test Beam by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
